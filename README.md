# migration_networks_replication
Welcome. This repository contains the replication files (code and template datasets) for the paper: 
Blumenstock, J.E., Chi, G., Tan, X., 2023. Migration and the Value of Social Networks. (Forthcoming, Review of Economic Studies)

There are three folders in this repository:
- data: containing all the input and output data for figures and tables.
- figures: containing all the scripts for generating figures.
- tables: containing all the scripts for generating tables.

The three scripts in this main folder detect migrants and calculate network structures for each person. The outputs of these scripts are the input for most of the tables and figures in the paper.

| Name                                                                                            | Step                                                                                                            | Script                                                    | input data                                                                                                                                                                                                                                                                     | output                                                                                                                                                                                                                                                                                   | Note                                                                                                                                                                       |
| ----------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Detect migrants                                                                                 | step 1: calculate modal districts for each month.                                                               | modal_district.py                                         | XXXX_mobility.txt                                                                                                                                                                                                                                                              | XXXX_modal_district.txt                                                                                                                                                                                                                                                                  | pyspark is required to run this script                                                                                                                                     |
|                                                                                                 | step 2: detect migration type of each person (urban to rural, rural to urban, rural to rural, remains, roamers) | migration_type.py                                         | XXXX_modal_district.txt                                                                                                                                                                                                                                                        | XXXX_migration.txt<br>XXXX_migration_XXmonth.txt                                                                                                                                                                                                                                         | pyspark is required to run this script.<br>For the 3/6/12 month definition, change the script to stay at home for 3/6/12 months and at destination for 3/6/12 months.      |
| Network structure                                                                               | calculate network structures for each person, such as degree, support, infomration                              | network_structure.py                                      | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt                                                                                                                                                                                                                 | XXXX_user_result.csv                                                                                                                                                                                                                                                                     | graphlab and snap are required to run the script                                                                                                                           |

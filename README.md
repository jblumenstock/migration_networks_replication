# Replication files for "Migration and the Value of Social Networks"
Welcome. This repository contains the replication files (code and template datasets) for the paper: 

- Blumenstock, J.E., Chi, G., Tan, X., 2023. Migration and the Value of Social Networks. (*Forthcoming, Review of Economic Studies*)

The repository contains three folders:
- data: Contains all of the sample input and output data required to generate the figures and tables
- figures: Contains the code needed to generate the figures
- tables: Contains the code needed to generate the tables

The top-level directory also contains three scripts that are used to detect migrations and calculate network statistics for each mobile subscriber. The outputs of these scripts provide the input for most of the tables and figures in the paper.

| Name                                                                                            | Step                                                                                                            | Script                                                    | input data                                                                                                                                                                                                                                                                     | output                                                                                                                                                                                                                                                                                   | Notes                                                                                                                                                                       |
| ----------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Detecting migrants                                                                                 | step 1: calculate modal districts for each month.                                                               | modal_district.py                                         | XXXX_mobility.txt                                                                                                                                                                                                                                                              | XXXX_modal_district.txt                                                                                                                                                                                                                                                                  | pyspark is required to run this script. Run this script within Spark Shell (./bin/spark-shell)                                                                                                                                     |
|                                                                                                 | step 2: detect migration type of each person (urban to rural, rural to urban, rural to rural, remains, roamers) | migration_type.py                                         | XXXX_modal_district.txt                                                                                                                                                                                                                                                        | XXXX_migration.txt<br>XXXX_migration_XXmonth.txt                                                                                                                                                                                                                                         | pyspark is required to run this script. Run this script within Spark Shell (./bin/spark-shell) <br>For the 3/6/12 month definition, change the script to stay at home for 3/6/12 months and at destination for 3/6/12 months.      |
| Network structure                                                                               | calculate network structures for each person, such as degree, support, infomration                              | network_structure.py                                      | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt                                                                                                                                                                                                                 | XXXX_user_result.csv                                                                                                                                                                                                                                                                     | graphlab and snap are required to run the script                                                                                                                           |

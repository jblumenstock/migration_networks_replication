# Replication files for figures

This folder lists all the codes for generating figures in the paper. The table below lists all the code, input data, output data, and note for each figure.

| Figure  | Name                                                                                            | Step                                                                                                            | Script                                                    | input data                                                                                                                                                                                                                                                                     | output                                                                                                                                                                                                                                                                                   | Note                                                                                                                                                                       |
| ---------- | ----------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Figure 1   | Schematic diagrams of the social networks of three migrants                                     | N/A                                                                                                             | N/A                                                       | N/A                                                                                                                                                                                                                                                                            | N/A                                                                                                                                                                                                                                                                                      | It's just a schematic diagram. No code or data is required.                                                                                                                |
| Figure 2   | The social network of a single migrant                                                          | N/A                                                                                                             | N/A                                                       | N/A                                                                                                                                                                                                                                                                            | N/A                                                                                                                                                                                                                                                                                      | Gephi is used to visualize this network.                                                                                                                                   |
| Figure 3   | Location of all mobile phone towers in Rwanda, circa 2008                                       | N/A                                                                                                             | N/A                                                       | tower_district.csv                                                                                                                                                                                                                                                             | N/A                                                                                                                                                                                                                                                                                      | QGIS is used to map the tower location.                                                                                                                                    |
| Figure 4   | Changes in network structure over time                                                          |                                                                                                                 | figure_4_A2_A3.py                                         | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | Figure 4<br>Figure A2<br>Figure A3                                                                                                                                                                                                                                                       |                                                                                                                                                                            |
| Figure 5   | Migration and degree centrality                                                                 |                                                                                                                 | figure_5_6ac_7ac.py                                       | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | Figure 5                                                                                                                                                                                                                                                                                 |                                                                                                                                                                            |
| Figure 6   | Migration and network “interconnectedness”                                                      | step 1: generate rate for the regression                                                                        | figure_6bd_7bd_A6bd_step1_generate_data_for_regression.py | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | cluster_dest_for_regression.csv<br>information_dest_for_regression.csv<br>support_dest_for_regression.csv                                                                                                                                                                                |                                                                                                                                                                            |
|            |                                                                                                 | step 2: convert the data format for regression                                                                  | figure_6bd_7bd_A6bd_step2_convert_data.py                 | cluster_dest_for_regression.csv<br>information_dest_for_regression.csv<br>support_dest_for_regression.csv                                                                                                                                                                      | cluster_dest_for_regression_22degree.csv<br>information_dest_for_regression_22degree.csv<br>support_dest_for_regression_22degree.csv                                                                                                                                                     | graphlab is required to run the script                                                                                                                                     |
|            |                                                                                                 | step 3: sampling the samples because of computing resource restriction                                          | figure_6bd_7bd_A6bd_step3_sampling.py                     | cluster_dest_for_regression_22degree.csv<br>information_dest_for_regression_22degree.csv<br>support_dest_for_regression_22degree.csv                                                                                                                                           | cluster_dest_for_regression_22degree_sampled_10pct.csv<br>information_dest_for_regression_22degree_sampled_10pct.csv<br>support_dest_for_regression_22degree_sampled_10pct.csv                                                                                                           |                                                                                                                                                                            |
|            |                                                                                                 | step 4: calculate coefficient and confidence interval                                                           | figure_6bd_7bd_A6bd_step4_regression.R                    | cluster_dest_for_regression_22degree_sampled_10pct.csv<br>information_dest_for_regression_22degree_sampled_10pct.csv<br>support_dest_for_regression_22degree_sampled_10pct.csv                                                                                                 | inset_XXXXX_coef_XXXX.csv<br>inset_XXXXX_se_XXX_XXXX.csv<br>(only included destination information in the repository. The other files have the same format)                                                                                                                              |                                                                                                                                                                            |
|            |                                                                                                 | step 5: plot the figure                                                                                         | figure_5_6ac_7ac.py, figure_6bd_7bd_A6bd_step5_plot.py    | inset_XXXXX_coef_XXXX.csv<br>inset_XXXXX_se_XXX_XXXX.csv                                                                                                                                                                                                                       | Figure 6                                                                                                                                                                                                                                                                                 |                                                                                                                                                                            |
| Figure 7   | Relationship between migration and “extensiveness”                                              | same as Figure 6                                                                                                | same as Figure 6                                          | inset_XXXXX_coef_XXXX.csv<br>inset_XXXXX_se_XXX_XXXX.csv                                                                                                                                                                                                                       | Figure 7                                                                                                                                                                                                                                                                                 |                                                                                                                                                                            |
| Figure 8   | The role of (higher order) strong and weak ties in a migrant’s network                          | N/A                                                                                                             | N/A                                                       | N/A                                                                                                                                                                                                                                                                            | N/A                                                                                                                                                                                                                                                                                      |                                                                                                                                                                            |
| Figure A1  | Validation of Migration Data                                                                    | step 1: calculate the proportion of migrants to/from each district                                              | figure_A1_A13_step1.py                                    | XXXX_migration.txt<br>XXXX_migration_12month.txt                                                                                                                                                                                                                               | cdr_move_to_district_proportion_2month.csv<br>cdr_move_from_district_proportion_2month.csv<br>cdr_move_to_district_proportion_12month.csv<br>cdr_move_from_district_proportion_12month.csv                                                                                               |                                                                                                                                                                            |
|            |                                                                                                 | step 2: plot the distribution                                                                                   | figure_A1_step2.py                                        | cdr_move_to_district_proportion_2month.csv<br>cdr_move_from_district_proportion_2month.csv<br>census_destination_simple.csv<br>census_origin.csv<br>(the last two files are from the internal migrants reported in the 2012 Rwandan census data. see the details in the paper) | Figure A1                                                                                                                                                                                                                                                                                |                                                                                                                                                                            |
| Figure A2  | Changes in number of contacts over time                                                         |                                                                                                                 | figure_4_A2_A3.py                                         | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | Figure 4<br>Figure A2<br>Figure A3                                                                                                                                                                                                                                                       |                                                                                                                                                                            |
| Figure A3  | Changes in number of calls over time                                                            |                                                                                                                 | figure_4_A2_A3.py                                         | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | Figure 4<br>Figure A2<br>Figure A3                                                                                                                                                                                                                                                       |                                                                                                                                                                            |
| Figure A4  | Number of friends of friends, before and after migration (migrants)                             |                                                                                                                 | figure_A4_A5.py                                           | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | Figure A4<br>Figure A5                                                                                                                                                                                                                                                                   |                                                                                                                                                                            |
| Figure A5  | Percent of friends with common support, before and after migration (migrants)                   |                                                                                                                 | figure_A4_A5.py                                           | XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                                                                     | Figure A4<br>Figure A5                                                                                                                                                                                                                                                                   |                                                                                                                                                                            |
| Figure A6  | Relationship between migration rate and clustering                                              |                                                                                                                 | same as Figure 6 and 7                                    | same as Figure 6 and 7                                                                                                                                                                                                                                                         | Figure A6                                                                                                                                                                                                                                                                                |                                                                                                                                                                            |
| Figure A7  | Migrants have fewer friends of friends than non-migrants                                        |                                                                                                                 | figure_A7.py                                              | dest_home_d_s_l.csv                                                                                                                                                                                                                                                            | Figure A7                                                                                                                                                                                                                                                                                |                                                                                                                                                                            |
| Figure A8  | Number of friends of friends, before and after migration, shift-share approach                  |                                                                                                                 | figure_A8_A9.py                                           | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt                                                                                                                                                                                                                 | Figure A8<br>Figure A9                                                                                                                                                                                                                                                                   |                                                                                                                                                                            |
| Figure A9  | Percent of friends with common support, before and after migration, shift-share approach        |                                                                                                                 | figure_A8_A9.py                                           | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt                                                                                                                                                                                                                 | Figure A8<br>Figure A9                                                                                                                                                                                                                                                                   |                                                                                                                                                                            |
| Figure A10 | Calibration results: marginal plots                                                             | step 1: calculate utility                                                                                       | figure_A10_A11_A12_step1_calcualte_utility.py             | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                         | all_add_feature dataframe (not saved into a file, directly run step 2)                                                                                                                                                                                                                   | These three scripts in the three steps were supposed to be in one file. To make it easier to understand, we split it into three parts.                                     |
|            |                                                                                                 | step 2: simulate                                                                                                | figure_A10_step2_simulate.py                              | all_add_feature dataframe                                                                                                                                                                                                                                                      | a dataframe a dataframe (not saved into a file, directly run step 3)                                                                                                                                                                                                                     |                                                                                                                                                                            |
|            |                                                                                                 | step 3: plot                                                                                                    | figure_A10_A12_step3_plot.py                              | a dataframe                                                                                                                                                                                                                                                                    | Figure A10                                                                                                                                                                                                                                                                               |                                                                                                                                                                            |
| Figure A11 | Calibration results: ‘information’ and ‘cooperation’ utility                                    | step 1: calculate utility                                                                                       | figure_A10_A11_A12_step1_calcualte_utility.py             | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                         | all_add_feature dataframe                                                                                                                                                                                                                                                                |                                                                                                                                                                            |
|            |                                                                                                 | step 2: plot utility                                                                                            | figure_A11_step2_plot.py                                  | all_add_feature dataframe                                                                                                                                                                                                                                                      | figure A11                                                                                                                                                                                                                                                                               |                                                                                                                                                                            |
| Figure A12 | Calibration results (with τ): marginal plots                                                    | step 1: calculate utility                                                                                       | figure_A10_A11_A12_step1_calcualte_utility.py             | XXXX_call.txt<br>XXXX_modal_district.txt<br>XXXX_migration.txt<br>XXXX_user_result.csv                                                                                                                                                                                         | all_add_feature dataframe                                                                                                                                                                                                                                                                |                                                                                                                                                                            |
|            |                                                                                                 | step 2: simulate                                                                                                | figure_A12_step2_simulate.py                              | all_add_feature dataframe                                                                                                                                                                                                                                                      | a dataframe (not saved into a file, directly run step 3)                                                                                                                                                                                                                                 |                                                                                                                                                                            |
|            |                                                                                                 | step 3: plot                                                                                                    | figure_A10_A12_step3_plot.py                              | a dataframe                                                                                                                                                                                                                                                                    | Figure A12                                                                                                                                                                                                                                                                               |                                                                                                                                                                            |
| Figure A13 | Validation of Migration Data - Varying Definition of Migration                                  | step 1: calculate the proportion of migrants to/from each district                                              | figure_A1_A13_step1.py                                    | XXXX_migration.txt<br>XXXX_migration_6month.txt<br>XXXX_migration_12month.txt                                                                                                                                                                                                  | cdr_move_to_district_proportion_2month.csv<br>cdr_move_from_district_proportion_2month.csv<br>cdr_move_to_district_proportion_6month.csv<br>cdr_move_from_district_proportion_6month.csv<br>cdr_move_to_district_proportion_12month.csv<br>cdr_move_from_district_proportion_12month.csv |                                                                                                                                                                            |
|            |                                                                                                 | step 2: plot the distribution                                                                                   | figure_A13_step2.py                                       | cdr_move_to_district_proportion_6month.csv<br>cdr_move_to_district_proportion_12month.csv<br>census_destination_simple.csv<br>census_origin.csv<br>(the last two files are from the internal migrants reported in the 2012 Rwandan census data. see the details in the paper)  | Figure A13                                                                                                                                                                                                                                                                               |                                                                                                                                                                            |
